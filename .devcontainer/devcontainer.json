{
  "name": "Alpine DevOps - Mercury",
  "build": {
    "dockerfile": "Dockerfile",
    "args": {
      "USERNAME": "alex",
      "USER_UID": "1000",
      "USER_GID": "1000"
    }
  },
  "mounts": [
    "source=${localEnv:HOME}/.ssh,target=/home/alex/.ssh-host,readonly,type=bind",
    "source=${localEnv:HOME}/.kube,target=/home/alex/.kube,readonly,type=bind",
    "source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind",
    "source=${localEnv:SSH_AUTH_SOCK},target=/ssh-agent,type=bind"
  ],
  "containerEnv": {
    "SSH_AUTH_SOCK": "/ssh-agent"
  },
  "remoteUser": "alex",
  "customizations": {
    "vscode": {
      "extensions": []
    }
  },
  "postCreateCommand": "mkdir -p ~/.ssh && cp -r ~/.ssh-host/* ~/.ssh/ 2>/dev/null; chmod 700 ~/.ssh && chmod 600 ~/.ssh/* 2>/dev/null; printf 'Host github.com\\nStrictHostKeyChecking no\\nUserKnownHostsFile=/dev/null\\nIdentityFile ~/.ssh/mercury\\n' > ~/.ssh/config && curl https://mise.run | sh && (curl -fsSL https://raw.githubusercontent.com/alexbenisch/dotfiles/main/setup-devcontainer | sh || true) && (chezmoi init --apply --source ~/.local/share/dotfiles alexbenisch/dotfiles || true) && (mise trust /workspaces/mercury-gitops 2>/dev/null || true) && (mise trust /home/alex 2>/dev/null || true)",
  "postStartCommand": "chezmoi apply --source ~/.local/share/dotfiles 2>/dev/null || true",
  "runArgs": [
    "--network=host"
  ]
}
